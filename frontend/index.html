<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link rel="stylesheet" href="style.css">
<title>Semantic and Interactive Navigation In Videos</title>
</head>
<body>
<div class="container-fluid adaptable" >
    <div class="row adaptable" >
        <div class="col-sm x_halved y_scrollable" > 
            <div class="row x_adaptable">
                <label class="label_15">Video: </label>
                <select id="video_names_selection" name="video_names"></select>
            </div>
            <canvas class="row" id="video"></canvas>
            <!--tabindex makes the element focusable-->
            <canvas class="row x_adaptable" tabindex="0" id="timeline"></canvas> 
        </div>
        <div class="col-sm x_halved y_scrollable" > 
            <label class="row x_adaptable">Inputs:</label>
            <div class="row x_adaptable" id="composite_text_query">
                <div class="sentence row x_adaptable">
                    <input type="button" value="+adj" class="add_adj_sbj col-1 button_space btn btn-outline-info"/>
                    <input type="text" placeholder="e.g. kid" maxlength=50 class="subject col-sm form-control"/>
                    <input type="button" value="+adv" class="add_adv col-1 button_space btn btn-outline-warning"/>
                    <input type="text" placeholder="playing with" maxlength=50 class="action col-sm form-control"/>
                    <input type="button" value="+adj" class="add_adj_obj col-1 button_space btn btn-outline-info"/>
                    <input type="text" placeholder="ball" maxlength=50 class="object col-sm form-control"/>
                </div>
                <div class="connector row justify-content-center x_adaptable">
                    <div class="col-sm"></div> <!--this is just a blank space-->
                    <input type="button" value="OR" class="or btn btn-info col-1 button_space"/>
                    <input type="button" value="AND" class="and btn btn-info col-1 button_space"/>
                    <input type="button" value="W/O" class="minus btn btn-info col-1 button_space"/>
                    <div class="col-sm"></div> <!--this is also just a blank space-->
                </div>
            </div>
            <div class="row x_adaptable">
                <input type="button" id="text_search_button" value="Text-based search" class="btn btn-sm btn-primary button_space"/>
                <input type="button" id="object_detection_button" value="Object detection" class="btn btn-sm btn-secondary button_space" />
                <input type="button" id="depthmap_computation_button" value="Depth estimation" class="btn btn-sm btn-secondary button_space" />
            </div>
            <div class="row x_adaptable">
                <input type="button" id="image_search_button" value="Crop-image-based search" class="btn btn-sm btn-primary button_space"/>
                <input type="button" id="toggle_crop" value="toggle cropping" class="btn btn-sm btn-secondary button_space" />
            </div>
            <div class="row x_adaptable">
                <label class="col text-left" id="crop_label">Cropped area: </label>
            </div>
            <div class="row x_adaptable justify-content-center">
                <canvas class="text-center" id="crop"></canvas>
            </div>
            <label class="row x_adaptable">Outputs:</label>
            <input type="button" id="toggle_obj" value="▲ Detected objects" class="row btn btn-sm btn-info x_adaptable"/>
            <div class="row" id="obj_div">
                <div class="loader" id="obj_plot_loader"></div>
                <canvas id="obj_plot"></canvas>
            </div>
            <input type="button" id="toggle_scores" value="▲ Similarity scores chart" class="row btn btn-sm btn-info x_adaptable"/>
            <div class="row justify-content-center x_adaptable" id="score_div">
                <div class="loader" id="score_plot_loader"></div>
                <canvas id="score_plot"></canvas>
                <div class="row x_adaptable">
                    <input type="button" id="select_threshold" value="select threshold" class="col-sm btn btn-sm btn-secondary button_space"/>
                    <input type="button" id="reset_score_plot" value="reset" class="col-sm btn btn-sm btn-secondary button_space"/>
                </div>
            </div>  
            <input type="button" id="toggle_reduction" value="▲ Video frames distribution" class="x_adaptable row btn btn-sm btn-info"/>
            <div class="row x_adaptable" id="reduction_div">
                <div class="row">
                    <div class="col-sm justify-content-center">
                        <input type="radio" name="select_reduction_method" value="tsne" checked />
                        <label>t-sne</label>
                    </div>
                    <div class="col-sm justify-content-center">
                        <input type="radio" name="select_reduction_method" value="pca"/>
                        <label>pca</label>
                    </div>
                    <div class="col-sm justify-content-center">
                        <input type="radio" name="select_reduction_method" value="umap"/>
                        <label>umap</label>
                    </div>
                </div>
                <div class="loader" id="reduction_plot_loader"></div>
                <canvas class="row x_adaptable" id="reduction_plot"></canvas>
                <div class="row justify-content-center">
                    <canvas class="text-center" id="reduction_color_map" height="0px"></canvas>
                </div>
                <div class="row">
                    <div class="col-sm justify-content-center">
                        <input type="radio" name="select_color_map" value="default" checked />
                        <label>default</label>
                    </div>
                    <div class="col-sm justify-content-center">
                        <input type="radio" name="select_color_map" value="clusters"/>
                        <label>dbscan</label>
                    </div>
                    <div class="col-sm justify-content-center">
                        <input type="radio" name="select_color_map" value="time"/>
                        <label>time</label>
                    </div>
                    <div class="col-sm justify-content-center">
                        <input type="radio" name="select_color_map" value="score"/>
                        <label>score</label>
                    </div>
                </div>
                <div class="row x_adaptable">
                    <input type="button" id="select_dots" value="navigate/select" class="col-sm btn btn-sm btn-secondary button_space"/>
                    <input type="button" id="reset_reduction_plot" value="reset" class="col-sm btn btn-sm btn-secondary button_space"/>
                </div>
                <div id="cluster_frame_div">
                    <img src="" alt="cluster -1" id="cluster_frame" />
                </div>
            </div>
            <input type="button" id="toggle_depth" value="▲ Depth map" class="row btn btn-sm btn-info x_adaptable"/>
            <div class="row" id="depth_div">
                <div class="loader" id="depth_plot_loader"></div>
                <canvas class="row x_adaptable" id="depth_video"></canvas>
            </div>
        </div>
    </div>
</div>
<!--global variables script-->
<script type="text/javascript" > 
    //currently used video
    window.current_video = "";

    //displayed frame
    window.current_index = 0;
    window.current_frame = new Image();
    window.max_index = 100;
    window.fps = 60;
    window.cmap = "default";

    //chart colors/sizes
    window.REGULAR_COLOR = "rgba(128, 128, 128, 0.5)";
    window.EMPHASIS_COLOR = "red";
    window.REGULAR_RADIUS = 2.5;
    window.EMPHASIS_RADIUS = 5;

    //zoom stuff
    window.MIN_SCALE = 0.1;
    window.MAX_SCALE = 100;

    //cropping stuff
    window.crop_top_left = { x: 10, y: 10 };
    window.crop_bot_right = { x: 60, y: 60 };
    window.is_crop_visible = false;

    //selection stuff
    window.selection_top_left = { x: 10, y: 10 };
    window.selection_bot_right = { x: 40, y: 40 };
    window.is_selection = false;
    window.selected_points = [[]];
    window.current_selection = 0;
    const SELECTION_COLORS = [ 
        {red: 65, green: 105, blue: 255}, //royalblue
        {red: 178, green: 34, blue: 34},  //brickred
        {red: 225, green: 185, blue: 65}, //honeyyellow
        {red: 34, green: 139, blue: 34} //forestgreen
    ];

    //query result slot
    window.scores = null;
    window.objs = null;
    window.depth = false;

    //dimension reduction stuff
    window.old_reduction = "tsne";
    window.displayed_reduction = null;

    window.tsne_reduction = null;
    window.pca_reduction = null;
    window.umap_reduction = null;

    window.tsne_clusters = null;
    window.pca_clusters = null;
    window.umap_clusters = null;

    window.tsne_cluster_frames = null;
    window.pca_cluster_frames = null;
    window.umap_cluster_frames = null;
  
</script>
<!--main script-->
<script defer src="main.js"></script>
<script defer src="video_selection.js"></script>
<script defer src="manage_query.js"></script>
<script defer src="similarity_scores_plot.js"></script>
<script defer src="crop_script.js"></script>
<script defer src="reduction_plot.js"></script>
<script defer src="obj_detec_plot.js"></script>
<script defer src="depth_script.js"></script>
<script defer src="timeline.js"></script>

</body>
</html>
